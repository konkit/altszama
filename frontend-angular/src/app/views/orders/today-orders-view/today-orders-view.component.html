<app-view-wrapper title="Today's Orders">
  <div *ngIf="todaysOrders$ | async as todayOrders" class="mt-10">
    <div>
      <h2 class="mb-4">You ordered:</h2>

      <mat-action-list *ngIf="todayOrders.currentOrderEntries.length > 0">
        <ng-container *ngFor="let orderEntry of todayOrders.currentOrderEntries">
          <ng-container *ngFor="let dishEntry of orderEntry.dishEntries">
            <mat-list-item (click)="goToOrder(orderEntry.orderId)">
              <b>{{ dishEntry.dish.name }}</b>
              from
              <b>{{ dishEntry.restaurantName }}</b>
              (STATUS: {{ orderEntry.orderState }})
            </mat-list-item>
          </ng-container>
        </ng-container>
      </mat-action-list>

      <div *ngIf="todayOrders.currentOrderEntries.length == 0">
        <div>
          You haven't ordered anything today yet.
        </div>
      </div>

      <hr class="my-5"/>

      <h2>Orders created today:</h2>

      <div class="pb-5">
        <mat-action-list *ngIf="todayOrders.ordersList.length > 0">
          <mat-list-item *ngFor="let element of todayOrders.ordersList" (click)="goToOrder(element.id)">
              <span matListItemTitle class="flex-row">
                <span>
                  <b>{{ element.restaurantName }}</b>
                </span>

                <span class="ml-auto">
                  (STATUS: {{ element.orderState }})
                </span>
              </span>

              <span matListItemLine>
                (created by {{ element.orderCreatorUsername }})
              </span>
          </mat-list-item>
        </mat-action-list>

        <div *ngIf="todayOrders.ordersList.length === 0">
          <div>No orders yet</div>
        </div>
      </div>

      <app-button [icon]="faAdd" color="primary" (click)="goToCreateOrder()">
        Add new order
      </app-button>
    </div>
  </div>
</app-view-wrapper>
