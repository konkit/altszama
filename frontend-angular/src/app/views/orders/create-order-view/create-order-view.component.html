<app-view-wrapper title="Create Order">
  <div *ngIf="fullRestaurantsList.length === 0">
    <h1 class="my-4">There are no restaurants, please create one first</h1>
  </div>

  <div *ngIf="fullRestaurantsList.length > 0">

    <mat-stepper [linear]="true" #stepper>
      <mat-step>
        <div *ngIf="filteredRestaurantsList$ | async as restaurantsList">

          <input type="text" [value]="restaurantsFilter" (input)="filterChanged($event)"
                 placeholder="Filter restaurants by name"/>

          <div *ngFor="let restaurant of restaurantsList"
               (click)="this.orderForm.controls.restaurantId.setValue(restaurant.id)"
               [ngClass]="{'selected': this.orderForm.controls.restaurantId.value === restaurant.id}">
            {{restaurant.name}}
          </div>
        </div>

        <button mat-button matStepperPrevious>Back</button>
        <button mat-button color="primary" matStepperNext>Next</button>
      </mat-step>


      <mat-step>
        <h1>Fill details</h1>

        <div class="flex flex-row justify-around">
          <div [formGroup]="orderForm">
            <h3>Order time</h3>

            <mat-form-field>
              <input matInput
                     [formControl]="orderForm.controls.timeOfOrder"
                     placeholder="16:00"
                     label="Order time"
              />
              <mat-icon matSuffix>
                watch_later
              </mat-icon>
            </mat-form-field>
          </div>

          <div>
            <h3>Payment</h3>
            <div>
              <mat-form-field>
                <mat-label>Price decrease (in percent)</mat-label>
                <input matInput [formControl]="orderForm.controls.deliveryData.controls.decreaseInPercent"/>
              </mat-form-field>
            </div>

            <div>
              <mat-form-field>
                <mat-label>Delivery cost (total)</mat-label>
                <input matInput [formControl]="orderForm.controls.deliveryData.controls.deliveryCostPerEverybody"/>
              </mat-form-field>
            </div>

            <div>
              <mat-form-field>
                <mat-label>Delivery cost (per dish)</mat-label>
                <input matInput [formControl]="orderForm.controls.deliveryData.controls.deliveryCostPerDish"/>
              </mat-form-field>
            </div>
          </div>

          <div>
            <h3>Payment</h3>

            <div>
              <mat-slide-toggle [formControl]="orderForm.controls.paymentData.controls.paymentByCash">
                Payment by cash
              </mat-slide-toggle>
            </div>

            <div>
              <mat-slide-toggle [formControl]="orderForm.controls.paymentData.controls.paymentByBankTransfer">
                Payment by bank transfer
              </mat-slide-toggle>
            </div>

            <div>
              <mat-form-field>
                <mat-label>Bank transfer number</mat-label>
                <input matInput [formControl]="orderForm.controls.paymentData.controls.bankTransferNumber"/>
              </mat-form-field>
            </div>

            <div>
              <mat-slide-toggle [formControl]="orderForm.controls.paymentData.controls.paymentByBlik">
                Payment by BLIK
              </mat-slide-toggle>
            </div>

            <div>
              <mat-form-field>
                <mat-label>BLIK phone number</mat-label>
                <input matInput [formControl]="orderForm.controls.paymentData.controls.blikPhoneNumber"/>
              </mat-form-field>
            </div>
          </div>

        </div>

        <button mat-button matStepperPrevious>Back</button>
        <button mat-button color="primary" (click)="submitForm($event)">Next</button>
      </mat-step>
    </mat-stepper>
  </div>
</app-view-wrapper>
