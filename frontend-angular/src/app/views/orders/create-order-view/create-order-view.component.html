<app-view-wrapper title="Create Order">
  <div *ngIf="fullRestaurantsList.length === 0">
    <h1 class="my-4">There are no restaurants, please create one first</h1>
  </div>

  <div *ngIf="fullRestaurantsList.length > 0">
    <mat-vertical-stepper [linear]="true">
      <mat-step [stepControl]="this.orderForm.controls.restaurantId">
        <ng-template matStepLabel>Select restaurant</ng-template>

        <div class="py-4">
          <mat-form-field class="w-full">
            <input matInput [value]="restaurantsFilter"
                   (input)="filterChanged($event)"
                   placeholder="Filter restaurants by name"/>
          </mat-form-field>

          <mat-selection-list [multiple]="false">
          <cdk-virtual-scroll-viewport itemSize="5">
            <div *cdkVirtualFor="let item of restaurantsTableDataSource.data">
              <mat-list-option (click)="this.orderForm.controls.restaurantId.setValue(item.id)" [selected]="this.orderForm.controls.restaurantId.value === item.id">
                {{item.name}}
              </mat-list-option>
            </div>
          </cdk-virtual-scroll-viewport>
          </mat-selection-list>

          <button mat-raised-button matStepperPrevious (click)="backToTodayOrders()">Back</button>
          <button mat-raised-button color="primary" matStepperNext>Next</button>
        </div>
      </mat-step>


      <mat-step>
        <ng-template matStepLabel>Fill details</ng-template>

        <div class="grid grid-cols-1 md:grid-cols-3 py-4 pr-10">
          <app-order-time-form class="mr-20 mb-5" [timeOfOrderControl]="orderForm.controls.timeOfOrder"></app-order-time-form>
          <app-delivery-data-form class="mb-5" [deliveryDataForm]="orderForm.controls.deliveryData"></app-delivery-data-form>
          <app-payment-data-form class="mb-5" [paymentDataForm]="orderForm.controls.paymentData"></app-payment-data-form>
        </div>

        <button mat-raised-button matStepperPrevious>Back</button>
        <button mat-raised-button color="primary" (click)="submitForm($event)">Create</button>
      </mat-step>
    </mat-vertical-stepper>
  </div>
</app-view-wrapper>
